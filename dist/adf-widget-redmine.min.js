!function(){"use strict";function o(e,t,o,i,n){var s;e.widget(t,{title:o,description:"Displays issues from a custom query",category:i,templateUrl:"{widgetsPath}/redmine/src/main/issues/view.html",controller:n?"easyIssueController":"issueController",controllerAs:"vm",resolve:{issues:["redmineService","easyRedmineService","config",function(e,t,o){if(o.customQuery)return n?t.getIssuesByQueryId(o.customQuery.id,o.project.id):e.getIssuesByQueryId(o.customQuery.id,o.customQuery.project_id)}]},edit:{templateUrl:(s=n)?"{widgetsPath}/redmine/src/main/issues/edit/easyedit.html":"{widgetsPath}/redmine/src/main/issues/edit/edit.html",controller:s?"easyEditIssuesController":"editIssuesController",controllerAs:"vm",resolve:{projects:["redmineService","easyRedmineService",function(e,t){return(s?t:e).getProjects()}],customQueries:["redmineService","easyRedmineService",function(e,t){return s?t.getCustomQueries().then(function(e){return e.easy_queries}):e.getCustomQueries().then(function(e){return e.queries})}]}}})}function i(e,t,o,i,n){e.widget(t,{title:o,description:"Displays all issues assigned to me",category:i,templateUrl:"{widgetsPath}/redmine/src/main/issues/view.html",controller:n?"easyIssueController":"issueController",controllerAs:"vm",resolve:{issues:["redmineService","easyRedmineService",function(e,t){return(n?t:e).getMyIssues()}]}})}function n(e,t,o,i,n){var s;e.widget(t,{title:o,description:"Displays a burnup or burndown chart",category:i,templateUrl:"{widgetsPath}/redmine/src/main/chart/view.html",controller:n?"easyChartController":"chartController",controllerAs:"vm",resolve:{chartData:["chartDataService","easyChartDataService","config",function(e,t,o){if(o.project)return(n?t:e).getChartData(o)}]},edit:{templateUrl:"{widgetsPath}/redmine/src/main/chart/edit/edit.html",controller:(s=n)?"easyEditChartController":"editChartController",controllerAs:"vm",resolve:{projects:["redmineService","easyRedmineService",function(e,t){return(s?t:e).getProjects()}]}}})}function s(e,t,o,i){e.possibleColumns={id:{name:"ID",show:!0},tracker:{name:"Tracker",show:!0},status:{name:"Status",show:!0},subject:{name:"Subject",show:!0},assignee:{name:"Assignee",show:!0},priority:{name:"Priority",show:!0}},angular.equals({},i)&&(i.columns=e.possibleColumns,i.customQuery="",i.project="",i.assigned_to_id="me",i.showClosed=!1),e.projects=t,e.customQueries=o}function r(s,e,t,o,i){s.config=t,s.projects=e,s.addFilter=function(e){"version"===e?s.config.filterWithVersion=!0:"assigned"===e?s.config.filterWithAssigned=!0:"tracker"===e&&(s.config.filterWithTracker=!0);s.filterToAdd="none"},s.converStringsToDateObjects=function(){s.config.timespan.fromDateTime&&(s.config.timespan.fromDateTime=new Date(s.config.timespan.fromDateTime),s.config.timespan.toDateTime=new Date(s.config.timespan.toDateTime))},s.toggleMin=function(){s.inlineOptions.minDate=s.inlineOptions.minDate?null:new Date,s.dateOptions.minDate=s.inlineOptions.minDate},s.open1=function(){s.popup1.opened=!0},s.open2=function(){s.popup2.opened=!0},s.updateVersions=function(){s.config.project&&("All"!==s.config.project?i.getVersions(angular.fromJson(s.config.project).identifier).then(function(e){s.versions=e}):s.versions=[])},s.checkUpdates=function(){s.config.filterWithVersion&&s.updateVersions()},s.updateVersionEnd=function(){s.config.timespan.toDateTime=new Date(angular.fromJson(s.config.version).due_date);var e=new Date(s.config.timespan.toDateTime);s.config.timespan.fromDateTime=e.setDate(e.getDate()-14)},s.updateTracker=function(){i.getTrackers().then(function(e){s.trackers=e})},s.filters=[{id:"version",name:"Fixed Version"},{id:"assigned",name:"Assigned to"},{id:"tracker",name:"Tracker"}],s.config.timespan||(s.config.timespan={}),s.inlineOptions={customClass:function(e){var t=e.date;if("day"===e.mode)for(var o=new Date(t).setHours(0,0,0,0),i=0;i<s.events.length;i++){var n=new Date(s.events[i].date).setHours(0,0,0,0);if(o===n)return s.events[i].status}return""},minDate:new Date,showWeeks:!0},s.dateOptions||(s.dateOptions={formatYear:"yy",startingDay:1}),s.formats=["yyyy-MM-dd","yyyy/MM/dd","dd.MM.yyyy","shortDate"],s.format=s.formats[0],s.altInputFormats=["M!/d!/yyyy"],s.popup1={opened:!1},s.popup2={opened:!1},s.toggleMin(),s.converStringsToDateObjects()}function a(){e.apply(this,arguments)}function l(){e.apply(this,arguments)}function e(e,t,o,i){this.http=e,this.apiEndpoint=t,this.apiEndpointRedirect=o,this.q=i}function c(t,e,o,i){o&&(t.config=o),o.columns||(t.config={columns:{id:{name:"ID",show:!0},tracker:{name:"Tracker",show:!0},status:{name:"Status",show:!0},subject:{name:"Subject",show:!0},assignee:{name:"Assignee",show:!1},priority:{name:"Priority",show:!0}},assigned_to_id:"me"}),e&&((t.issues=e).issues&&(t.issues=t.issues.issues),e.error&&(t.error=e.error,t.issues=null));e=(e=i.getRedmineRedirectEndpoint())||i.getRedmineEndpoint();t.issueUrl=e+"issues/",t.order="id",t.changeOrder=function(e){t.order=e,t.reverse=!t.reverse}}function p(e,o){function i(e,t,o,i){for(var n=Math.abs(e.getTime()-t.getTime()),s=n/i.numberPoints,r=o.length,a=r/n,l=[],c=[],p=[];e.getTime()<=t.getTime();){!function(e,t,o){for(var i=0;i<e.length;i++)new Date(e[i].created_on).getTime()<=o.getTime()&&(t.push(e[i]),e.splice(i,1),i--)}(o,c,e),function(e,t){for(var o=0;o<e.length;o++)e[o].closed_on&&new Date(e[o].closed_on).getTime()<=t.getTime()&&(e.splice(o,1),o--)}(c,e);var u={x:e.toISOString(),y:c.length};p.push(u),i.showIdeal&&(u=Math.round(100*(r-l.length*a*s))/100,u={x:e.toISOString(),y:u},l.push(u)),e.setTime(e.getTime()+s)}n=[p];return i.showIdeal&&n.push(l),n}return{getChartData:function(t){return o.getIssuesForChart(t).then(function(e){return t.numberPoints=50,i(new Date(t.timespan.fromDateTime),new Date(t.timespan.toDateTime),e,t)})}}}function u(e,t,o){e.config=o;e.chart={data:t,series:[],class:"chart-line",options:{scales:{yAxes:[{id:"y-axis-1",display:!0,position:"left",scaleLabel:{display:!0,labelString:"Open Issues"}}],xAxes:[{id:"x-axis-1",type:"time",time:{displayFormats:{day:"D.MMM",week:"D.MMM",month:"MMM/YY",quarter:"[Q]Q - YYYY",year:"YYYY"}}}]},legend:{display:!0,position:"bottom"},responsive:!0}},e.config.project&&"All"!==e.config.project?e.chart.series.push(angular.fromJson(e.config.project).name):e.chart.series.push("All Projects"),e.config.showIdeal&&e.chart.series.push("Ideal")}angular.module("adf.widget.redmine",["adf.provider","chart.js","ui.bootstrap.datepicker"]).constant("redmineEndpoint","http://192.168.56.2/redmine/").constant("redmineRedirectEndpoint",null).config(["dashboardProvider",function(e){var t="Redmine";i(e,"redmine-my-issues","My Issues",t,!1),o(e,"redmine-custom-queries","Custom Queries",t,!1),n(e,"redmine-chart","Chart",t,!1)}]),angular.module("adf.widget.easyredmine",["adf.provider","chart.js","ui.bootstrap.datepicker"]).constant("easyRedmineEndpoint","http://192.168.56.2/easyredmine/").constant("easyRedmineRedirectEndpoint",null).config(["dashboardProvider",function(e){var t="EasyRedmine";i(e,"easyredmine-my-issues","My Issues",t,!0),o(e,"easyredmine-custom-queries","Custom Queries",t,!0),n(e,"easyredmine-chart","Chart",t,!0)}]),angular.module("adf.widget.easyredmine").run(["$templateCache",function(e){e.put("{widgetsPath}/redmine/src/main/chart/view.html",'<style type=text/css>\n  p > .glyphicon-info-sign {\n    margin-left: 3px;\n  }\n</style><div class="alert alert-danger" ng-if=vm.error><span ng-if="vm.error.status == 404">Service returned status {{vm.error.status}}. Make sure your endpoint is reachable.</span></div><div class="alert alert-info" ng-if=!vm.config.project>Please configure the widget</div><div ng-if="vm.chart && vm.config.project"><canvas id=line class="chart chart-line" chart-data=vm.chart.data chart-series=vm.chart.series chart-options=vm.chart.options></canvas></div>'),e.put("{widgetsPath}/redmine/src/main/issues/view.html",'<style type=text/css>\n  td>a{\n    font-weight: bold;\n    padding: 2px;\n    color: white;\n    border-radius: 2px 6px 6px 2px;\n    background-color: #409ae3;\n  }\n  td>a:hover{\n    color: white;\n    background-color: #4183c4;\n  }\n  th{\n    cursor: pointer;\n  }\n  .x-scrollable {\n    width: 100%;\n    max-height: 800px;\n    overflow-x: auto;\n  }\n\n\n</style><div class="alert alert-info" ng-if="!vm.issues && !vm.error">Please configure the widget</div><div class="alert alert-danger" ng-if=vm.error><span ng-if="vm.error.status == 404">Service returned status {{vm.error.status}}. Make sure your endpoint is reachable.</span></div><div class="alert alert-info" ng-if="vm.issues && !vm.issues[0].id">No issues found.</div><div ng-if="vm.issues && vm.issues[0].id" class=x-scrollable><table class="table table-fixed"><thead><tr><th ng-if=vm.config.columns.id.show ng-click="vm.changeOrder(\'id\')">ID ↓</th><th ng-if=vm.config.columns.tracker.show ng-click="vm.changeOrder(\'tracker.name\')">Tracker</th><th ng-if=vm.config.columns.status.show ng-click="vm.changeOrder(\'status.name\')">Status</th><th ng-if=vm.config.columns.priority.show ng-click="vm.changeOrder(\'priority.name\')">Priority</th><th ng-if=vm.config.columns.subject.show ng-click="vm.changeOrder(\'subject\')">Subject</th><th ng-if=vm.config.columns.assignee.show ng-click="vm.changeOrder(\'assignee.name\')">Assignee</th></tr></thead><tr ng-repeat="issue in vm.issues | orderBy: vm.order : vm.reverse"><td ng-if=vm.config.columns.id.show title="\'ID\'"><a href={{vm.issueUrl}}{{issue.id}}>#{{issue.id}}</a></td><td ng-if=vm.config.columns.tracker.show title="\'Tracker\'">{{issue.tracker.name}}</td><td ng-if=vm.config.columns.status.show title="\'Status\'">{{issue.status.name}}</td><td ng-if=vm.config.columns.priority.show title="\'Priority\'">{{issue.priority.name}}</td><td ng-if=vm.config.columns.subject.show title="\'Subject\'">{{issue.subject}}</td><td ng-if=vm.config.columns.assignee.show title="\'Assignee\'">{{issue.assigned_to.name}}</td></tr></table></div>'),e.put("{widgetsPath}/redmine/src/main/chart/edit/edit.html",'<form name=chartEditForm role=form><div class=form-group><label for=project>Project</label> <span class="grey glyphicon glyphicon-info-sign ng-scope" tabindex=0 ng-focus="projectTooltipIsOpen = !projectTooltipIsOpen" tooltip-trigger=outsideClick tooltip-is-open=projectTooltipIsOpen ng-mouseenter="projectTooltipIsOpen = !projectTooltipIsOpen" uib-tooltip="Choose a project" tooltip-placement=top aria-label="Choose a project"></span><select name=project id=project class=form-control ng-model=vm.config.project ng-change=vm.checkUpdates() ng-required=true><option value=All>All</option><option ng-repeat="project in vm.projects | orderBy: \'name\'" value={{project}}>{{project.name}}</option></select></div><p class=input-group><label for=Filter>Add Filter</label> <span class="grey glyphicon glyphicon-info-sign ng-scope" tabindex=0 ng-focus="filterTooltipIsOpen = !filterTooltipIsOpen" tooltip-trigger=outsideClick tooltip-is-open=filterTooltipIsOpen ng-mouseenter="filterTooltipIsOpen = !filterTooltipIsOpen" uib-tooltip="Add optional filters like assignee, version or tracker type" tooltip-placement=top aria-label="Add optional filters"></span><select name=filter id=filter class=form-control ng-model=vm.filterToAdd ng-change=vm.addFilter(vm.filterToAdd)><option ng-repeat="filter in vm.filters | orderBy: \'name\'" value={{filter.id}}>{{filter.name}}</option></select></p><div ng-if=vm.config.filterWithVersion><label for=version>Fixed Version</label> <span class="grey glyphicon glyphicon-info-sign ng-scope" tabindex=0 ng-focus="versionTooltipIsOpen = !versionTooltipIsOpen" tooltip-trigger=outsideClick tooltip-is-open=versionTooltipIsOpen ng-mouseenter="versionTooltipIsOpen = !versionTooltipIsOpen" uib-tooltip="Specify a version" tooltip-placement=top aria-label="Specify a version"></span><p class=input-group ng-init=vm.updateVersions()><select name=version id=version class=form-control ng-model=vm.config.version ng-change=vm.updateVersionEnd()><option ng-repeat="version in vm.versions | orderBy: \'name\'" value={{version}}>{{version.name}}</option></select><span class=input-group-btn><button class="btn btn-default" ng-click="vm.config.filterWithVersion=false" type=button><i class="glyphicon glyphicon-remove"></i></button></span></p></div><div ng-if=vm.config.filterWithAssigned><label for=assigned_to_id>Assigned To</label> <span class="grey glyphicon glyphicon-info-sign ng-scope" tabindex=0 ng-focus="assignedToTooltipIsOpen = !assignedToTooltipIsOpen" tooltip-trigger=outsideClick tooltip-is-open=assignedToTooltipIsOpen ng-mouseenter="assignedToTooltipIsOpen = !assignedToTooltipIsOpen" uib-tooltip-html=assignedToTooltip tooltip-placement=top aria-label="Get issues which are assigned to the given user ID"></span><div class=input-group><input name=assigned_to_id id=assigned_to_id class=form-control ng-model=config.assigned_to_id> <span class=input-group-btn><button class="btn btn-default" ng-click="vm.config.filterWithAssigned=false" type=button><i class="glyphicon glyphicon-remove"></i></button></span></div></div><div ng-if=vm.config.filterWithTracker><label for=tracker>Tracker</label> <span class="grey glyphicon glyphicon-info-sign ng-scope" tabindex=0 ng-focus="trackerTooltipIsOpen = !trackerTooltipIsOpen" tooltip-trigger=outsideClick tooltip-is-open=trackerTooltipIsOpen ng-mouseenter="trackerTooltipIsOpen = !trackerTooltipIsOpen" uib-tooltip-html=trackerTooltip tooltip-placement=top aria-label="show Ideal-line Tooltip"></span><div class=input-group ng-init=vm.updateTracker()><select name=tracker id=tracker class=form-control ng-model=vm.config.tracker><option ng-repeat="tracker in vm.trackers | orderBy: \'name\'" value={{tracker}}>{{tracker.name}}</option></select><span class=input-group-btn><button class="btn btn-default" ng-click="vm.config.filterWithTracker=false" type=button><i class="glyphicon glyphicon-remove"></i></button></span></div></div><div class=form-group><input type=checkbox name=showIdeal ng-model=config.showIdeal> Show ideal line <span class="grey glyphicon glyphicon-info-sign ng-scope" tabindex=0 ng-focus="showIdealTooltipIsOpen = !showIdealTooltipIsOpen" tooltip-trigger=outsideClick tooltip-is-open=showIdealTooltipIsOpen ng-mouseenter="showIdealTooltipIsOpen = !showIdealTooltipIsOpen" uib-tooltip="choose a tracker type like bug, feature or support" tooltip-placement=top aria-label="choose a tracker type like bug, feature or support"></span></div><div><label for=period>Period</label> <span class="grey glyphicon glyphicon-info-sign ng-scope" tabindex=0 ng-focus="periodTooltipIsOpen = !periodTooltipIsOpen" tooltip-trigger=outsideClick tooltip-is-open=periodTooltipIsOpen ng-mouseenter="periodTooltipIsOpen = !periodTooltipIsOpen" uib-tooltip="select the period for which the graph is to be shown" tooltip-placement=top aria-label="select the period for which the graph is to be shown"></span><p class=input-group><input id=period name=period class=form-control datepicker-options=vm.dateOptions is-open=vm.popup1.opened ng-model=vm.config.timespan.fromDateTime placeholder="YYYY-MM-DD (from)" show-button-bar=false type=text uib-datepicker-popup={{format}} ng-required=true> <span class=input-group-btn><button class="btn btn-default" ng-click=vm.open1() type=button><i class="glyphicon glyphicon-calendar"></i></button></span></p><p class=input-group><input class=form-control datepicker-options=vm.dateOptions is-open=vm.popup2.opened ng-model=vm.config.timespan.toDateTime placeholder="YYYY-MM-DD (to)" show-button-bar=false type=text uib-datepicker-popup={{format}} ng-required=true> <span class=input-group-btn><button class="btn btn-default" ng-click=vm.open2() type=button><i class="glyphicon glyphicon-calendar"></i></button></span></p></div></form>'),e.put("{widgetsPath}/redmine/src/main/issues/edit/easyedit.html",'<form role=form><div class=form-group><label>Project</label> <span class="grey glyphicon glyphicon-info-sign ng-scope" tabindex=0 ng-focus="projectTooltipIsOpen = !projectTooltipIsOpen" tooltip-trigger=outsideClick tooltip-is-open=projectTooltipIsOpen ng-mouseenter="projectTooltipIsOpen = !projectTooltipIsOpen" uib-tooltip="Choose a project" tooltip-placement=top aria-label="Choose a project"></span><select name=project ng-options="project as project.name for project in vm.projects track by project.name" required class=form-control ng-model=config.project><option disabled>Select your project</option></select></div><div class=form-group ng-if=config.project><label>My Custom-Queries</label> <span class="glyphicon glyphicon-info-sign" uib-tooltip="EasyRedmine only supports custom queries that are not restricted to a specific project. This can be achieved in the configuration for a custom query by enabling \'for all projects\' instead of a specific project."></span><select name=customQuery ng-options="customQuery as customQuery.name for customQuery in vm.customQueries track by customQuery.name" required class=form-control ng-model=config.customQuery><option disabled>Select your query</option></select></div><div class=form-group><input type=checkbox name=showClosed ng-model=config.showClosed> Show closed issues</div><div class=form-group><label>Columns to show</label><li class=list-group-item ng-repeat="(key, entry) in vm.possibleColumns"><input type=checkbox name={{key}} ng-model=config.columns[key].show> {{entry.name}}</li></div></form>'),e.put("{widgetsPath}/redmine/src/main/issues/edit/edit.html",'<form role=form><div class=form-group><label>My Custom-Queries</label> <span class="grey glyphicon glyphicon-info-sign ng-scope" tabindex=0 ng-focus="customQueryTooltipIsOpen = !customQueryTooltipIsOpen" tooltip-trigger=outsideClick tooltip-is-open=customQueryTooltipIsOpen uib-tooltip-html=customQueryTooltip ng-mouseover="customQueryTooltipIsOpen = !customQueryTooltipIsOpen" tooltip-placement=top aria-label="Select a custom query"></span><select name=customQuery ng-options="customQuery as customQuery.name for customQuery in vm.customQueries track by customQuery.name" required class=form-control ng-model=config.customQuery><option disabled>Select your query</option></select></div><div class=form-group><input type=checkbox name=showClosed ng-model=config.showClosed> Show closed issues</div><div class=form-group><label>Columns to show</label> <span class="grey glyphicon glyphicon-info-sign ng-scope" tabindex=0 ng-focus="columnsTooltipIsOpen = !columnsTooltipIsOpen" tooltip-trigger=outsideClick tooltip-is-open=columnsTooltipIsOpen ng-mouseenter="columnsTooltipIsOpen = !columnsTooltipIsOpen" uib-tooltip="Select the columns that should be displayed" tooltip-placement=top aria-label="Select the columns that should be displayed"></span><li class=list-group-item ng-repeat="(key, entry) in vm.possibleColumns"><input type=checkbox name={{key}} ng-model=config.columns[key].show> {{entry.name}}</li></div></form>')}]),angular.module("adf.widget.redmine").run(["$templateCache",function(e){e.put("{widgetsPath}/redmine/src/main/chart/view.html",'<style type=text/css>\n  p > .glyphicon-info-sign {\n    margin-left: 3px;\n  }\n</style><div class="alert alert-danger" ng-if=vm.error><span ng-if="vm.error.status == 404">Service returned status {{vm.error.status}}. Make sure your endpoint is reachable.</span></div><div class="alert alert-info" ng-if=!vm.config.project>Please configure the widget</div><div ng-if="vm.chart && vm.config.project"><canvas id=line class="chart chart-line" chart-data=vm.chart.data chart-series=vm.chart.series chart-options=vm.chart.options></canvas></div>'),e.put("{widgetsPath}/redmine/src/main/issues/view.html",'<style type=text/css>\n  td>a{\n    font-weight: bold;\n    padding: 2px;\n    color: white;\n    border-radius: 2px 6px 6px 2px;\n    background-color: #409ae3;\n  }\n  td>a:hover{\n    color: white;\n    background-color: #4183c4;\n  }\n  th{\n    cursor: pointer;\n  }\n  .x-scrollable {\n    width: 100%;\n    max-height: 800px;\n    overflow-x: auto;\n  }\n\n\n</style><div class="alert alert-info" ng-if="!vm.issues && !vm.error">Please configure the widget</div><div class="alert alert-danger" ng-if=vm.error><span ng-if="vm.error.status == 404">Service returned status {{vm.error.status}}. Make sure your endpoint is reachable.</span></div><div class="alert alert-info" ng-if="vm.issues && !vm.issues[0].id">No issues found.</div><div ng-if="vm.issues && vm.issues[0].id" class=x-scrollable><table class="table table-fixed"><thead><tr><th ng-if=vm.config.columns.id.show ng-click="vm.changeOrder(\'id\')">ID ↓</th><th ng-if=vm.config.columns.tracker.show ng-click="vm.changeOrder(\'tracker.name\')">Tracker</th><th ng-if=vm.config.columns.status.show ng-click="vm.changeOrder(\'status.name\')">Status</th><th ng-if=vm.config.columns.priority.show ng-click="vm.changeOrder(\'priority.name\')">Priority</th><th ng-if=vm.config.columns.subject.show ng-click="vm.changeOrder(\'subject\')">Subject</th><th ng-if=vm.config.columns.assignee.show ng-click="vm.changeOrder(\'assignee.name\')">Assignee</th></tr></thead><tr ng-repeat="issue in vm.issues | orderBy: vm.order : vm.reverse"><td ng-if=vm.config.columns.id.show title="\'ID\'"><a href={{vm.issueUrl}}{{issue.id}}>#{{issue.id}}</a></td><td ng-if=vm.config.columns.tracker.show title="\'Tracker\'">{{issue.tracker.name}}</td><td ng-if=vm.config.columns.status.show title="\'Status\'">{{issue.status.name}}</td><td ng-if=vm.config.columns.priority.show title="\'Priority\'">{{issue.priority.name}}</td><td ng-if=vm.config.columns.subject.show title="\'Subject\'">{{issue.subject}}</td><td ng-if=vm.config.columns.assignee.show title="\'Assignee\'">{{issue.assigned_to.name}}</td></tr></table></div>'),e.put("{widgetsPath}/redmine/src/main/chart/edit/edit.html",'<form name=chartEditForm role=form><div class=form-group><label for=project>Project</label> <span class="grey glyphicon glyphicon-info-sign ng-scope" tabindex=0 ng-focus="projectTooltipIsOpen = !projectTooltipIsOpen" tooltip-trigger=outsideClick tooltip-is-open=projectTooltipIsOpen ng-mouseenter="projectTooltipIsOpen = !projectTooltipIsOpen" uib-tooltip="Choose a project" tooltip-placement=top aria-label="Choose a project"></span><select name=project id=project class=form-control ng-model=vm.config.project ng-change=vm.checkUpdates() ng-required=true><option value=All>All</option><option ng-repeat="project in vm.projects | orderBy: \'name\'" value={{project}}>{{project.name}}</option></select></div><p class=input-group><label for=Filter>Add Filter</label> <span class="grey glyphicon glyphicon-info-sign ng-scope" tabindex=0 ng-focus="filterTooltipIsOpen = !filterTooltipIsOpen" tooltip-trigger=outsideClick tooltip-is-open=filterTooltipIsOpen ng-mouseenter="filterTooltipIsOpen = !filterTooltipIsOpen" uib-tooltip="Add optional filters like assignee, version or tracker type" tooltip-placement=top aria-label="Add optional filters"></span><select name=filter id=filter class=form-control ng-model=vm.filterToAdd ng-change=vm.addFilter(vm.filterToAdd)><option ng-repeat="filter in vm.filters | orderBy: \'name\'" value={{filter.id}}>{{filter.name}}</option></select></p><div ng-if=vm.config.filterWithVersion><label for=version>Fixed Version</label> <span class="grey glyphicon glyphicon-info-sign ng-scope" tabindex=0 ng-focus="versionTooltipIsOpen = !versionTooltipIsOpen" tooltip-trigger=outsideClick tooltip-is-open=versionTooltipIsOpen ng-mouseenter="versionTooltipIsOpen = !versionTooltipIsOpen" uib-tooltip="Specify a version" tooltip-placement=top aria-label="Specify a version"></span><p class=input-group ng-init=vm.updateVersions()><select name=version id=version class=form-control ng-model=vm.config.version ng-change=vm.updateVersionEnd()><option ng-repeat="version in vm.versions | orderBy: \'name\'" value={{version}}>{{version.name}}</option></select><span class=input-group-btn><button class="btn btn-default" ng-click="vm.config.filterWithVersion=false" type=button><i class="glyphicon glyphicon-remove"></i></button></span></p></div><div ng-if=vm.config.filterWithAssigned><label for=assigned_to_id>Assigned To</label> <span class="grey glyphicon glyphicon-info-sign ng-scope" tabindex=0 ng-focus="assignedToTooltipIsOpen = !assignedToTooltipIsOpen" tooltip-trigger=outsideClick tooltip-is-open=assignedToTooltipIsOpen ng-mouseenter="assignedToTooltipIsOpen = !assignedToTooltipIsOpen" uib-tooltip-html=assignedToTooltip tooltip-placement=top aria-label="Get issues which are assigned to the given user ID"></span><div class=input-group><input name=assigned_to_id id=assigned_to_id class=form-control ng-model=config.assigned_to_id> <span class=input-group-btn><button class="btn btn-default" ng-click="vm.config.filterWithAssigned=false" type=button><i class="glyphicon glyphicon-remove"></i></button></span></div></div><div ng-if=vm.config.filterWithTracker><label for=tracker>Tracker</label> <span class="grey glyphicon glyphicon-info-sign ng-scope" tabindex=0 ng-focus="trackerTooltipIsOpen = !trackerTooltipIsOpen" tooltip-trigger=outsideClick tooltip-is-open=trackerTooltipIsOpen ng-mouseenter="trackerTooltipIsOpen = !trackerTooltipIsOpen" uib-tooltip-html=trackerTooltip tooltip-placement=top aria-label="show Ideal-line Tooltip"></span><div class=input-group ng-init=vm.updateTracker()><select name=tracker id=tracker class=form-control ng-model=vm.config.tracker><option ng-repeat="tracker in vm.trackers | orderBy: \'name\'" value={{tracker}}>{{tracker.name}}</option></select><span class=input-group-btn><button class="btn btn-default" ng-click="vm.config.filterWithTracker=false" type=button><i class="glyphicon glyphicon-remove"></i></button></span></div></div><div class=form-group><input type=checkbox name=showIdeal ng-model=config.showIdeal> Show ideal line <span class="grey glyphicon glyphicon-info-sign ng-scope" tabindex=0 ng-focus="showIdealTooltipIsOpen = !showIdealTooltipIsOpen" tooltip-trigger=outsideClick tooltip-is-open=showIdealTooltipIsOpen ng-mouseenter="showIdealTooltipIsOpen = !showIdealTooltipIsOpen" uib-tooltip="choose a tracker type like bug, feature or support" tooltip-placement=top aria-label="choose a tracker type like bug, feature or support"></span></div><div><label for=period>Period</label> <span class="grey glyphicon glyphicon-info-sign ng-scope" tabindex=0 ng-focus="periodTooltipIsOpen = !periodTooltipIsOpen" tooltip-trigger=outsideClick tooltip-is-open=periodTooltipIsOpen ng-mouseenter="periodTooltipIsOpen = !periodTooltipIsOpen" uib-tooltip="select the period for which the graph is to be shown" tooltip-placement=top aria-label="select the period for which the graph is to be shown"></span><p class=input-group><input id=period name=period class=form-control datepicker-options=vm.dateOptions is-open=vm.popup1.opened ng-model=vm.config.timespan.fromDateTime placeholder="YYYY-MM-DD (from)" show-button-bar=false type=text uib-datepicker-popup={{format}} ng-required=true> <span class=input-group-btn><button class="btn btn-default" ng-click=vm.open1() type=button><i class="glyphicon glyphicon-calendar"></i></button></span></p><p class=input-group><input class=form-control datepicker-options=vm.dateOptions is-open=vm.popup2.opened ng-model=vm.config.timespan.toDateTime placeholder="YYYY-MM-DD (to)" show-button-bar=false type=text uib-datepicker-popup={{format}} ng-required=true> <span class=input-group-btn><button class="btn btn-default" ng-click=vm.open2() type=button><i class="glyphicon glyphicon-calendar"></i></button></span></p></div></form>'),e.put("{widgetsPath}/redmine/src/main/issues/edit/easyedit.html",'<form role=form><div class=form-group><label>Project</label> <span class="grey glyphicon glyphicon-info-sign ng-scope" tabindex=0 ng-focus="projectTooltipIsOpen = !projectTooltipIsOpen" tooltip-trigger=outsideClick tooltip-is-open=projectTooltipIsOpen ng-mouseenter="projectTooltipIsOpen = !projectTooltipIsOpen" uib-tooltip="Choose a project" tooltip-placement=top aria-label="Choose a project"></span><select name=project ng-options="project as project.name for project in vm.projects track by project.name" required class=form-control ng-model=config.project><option disabled>Select your project</option></select></div><div class=form-group ng-if=config.project><label>My Custom-Queries</label> <span class="glyphicon glyphicon-info-sign" uib-tooltip="EasyRedmine only supports custom queries that are not restricted to a specific project. This can be achieved in the configuration for a custom query by enabling \'for all projects\' instead of a specific project."></span><select name=customQuery ng-options="customQuery as customQuery.name for customQuery in vm.customQueries track by customQuery.name" required class=form-control ng-model=config.customQuery><option disabled>Select your query</option></select></div><div class=form-group><input type=checkbox name=showClosed ng-model=config.showClosed> Show closed issues</div><div class=form-group><label>Columns to show</label><li class=list-group-item ng-repeat="(key, entry) in vm.possibleColumns"><input type=checkbox name={{key}} ng-model=config.columns[key].show> {{entry.name}}</li></div></form>'),e.put("{widgetsPath}/redmine/src/main/issues/edit/edit.html",'<form role=form><div class=form-group><label>My Custom-Queries</label> <span class="grey glyphicon glyphicon-info-sign ng-scope" tabindex=0 ng-focus="customQueryTooltipIsOpen = !customQueryTooltipIsOpen" tooltip-trigger=outsideClick tooltip-is-open=customQueryTooltipIsOpen uib-tooltip-html=customQueryTooltip ng-mouseover="customQueryTooltipIsOpen = !customQueryTooltipIsOpen" tooltip-placement=top aria-label="Select a custom query"></span><select name=customQuery ng-options="customQuery as customQuery.name for customQuery in vm.customQueries track by customQuery.name" required class=form-control ng-model=config.customQuery><option disabled>Select your query</option></select></div><div class=form-group><input type=checkbox name=showClosed ng-model=config.showClosed> Show closed issues</div><div class=form-group><label>Columns to show</label> <span class="grey glyphicon glyphicon-info-sign ng-scope" tabindex=0 ng-focus="columnsTooltipIsOpen = !columnsTooltipIsOpen" tooltip-trigger=outsideClick tooltip-is-open=columnsTooltipIsOpen ng-mouseenter="columnsTooltipIsOpen = !columnsTooltipIsOpen" uib-tooltip="Select the columns that should be displayed" tooltip-placement=top aria-label="Select the columns that should be displayed"></span><li class=list-group-item ng-repeat="(key, entry) in vm.possibleColumns"><input type=checkbox name={{key}} ng-model=config.columns[key].show> {{entry.name}}</li></div></form>')}]),angular.module("adf.widget.redmine").controller("editIssuesController",["projects","customQueries","config","$scope","$sce",function(e,t,o,i,n){return i.customQueryTooltip=n.trustAsHtml("Select a custom query. Querys can be defined in Redmine."),s(this,e,t,o)}]),angular.module("adf.widget.easyredmine").controller("easyEditIssuesController",["projects","customQueries","config","$scope","$sce",function(e,t,o,i,n){return i.customQueryTooltip=n.trustAsHtml("Select a custom query. Querys can be defined in EasyRedmine."),s(this,e,t,o)}]),angular.module("adf.widget.redmine").controller("editChartController",["projects","config","chartDataService","redmineService","$scope","$sce",function(e,t,o,i,n,s){return n.showIdealTooltip=s.trustAsHtml("<b>OPTIONAL</b><br>If checked displays an ideal line on the chart"),n.assignedToTooltip=s.trustAsHtml("Get issues which are assigned to the given user ID. <b>me</b> (but not <b>&lt;me&gt;</b> or <b>&lt;&lt;me&gt;&gt;</b>) can be used instead an ID to fetch all issues from the logged in user. Leave empty if you want to see all issues."),r(this,e,t,0,i)}]),angular.module("adf.widget.easyredmine").controller("easyEditChartController",["projects","config","easyChartDataService","easyRedmineService","$scope","$sce",function(e,t,o,i,n,s){return n.showIdealTooltip=s.trustAsHtml("<b>OPTIONAL</b><br>If checked displays an ideal line on the chart"),n.assignedToTooltip=s.trustAsHtml("Get issues which are assigned to the given user ID. <b>me</b> (but not <b>&lt;me&gt;</b> or <b>&lt;&lt;me&gt;&gt;</b>) can be used instead an ID to fetch all issues from the logged in user. Leave empty if you want to see all issues."),r(this,e,t,0,i)}]),(a.prototype=new e).constructor=a,angular.module("adf.widget.redmine").factory("redmineService",["$http","redmineEndpoint","redmineRedirectEndpoint","$q",function(e,t,o,i){return new a(e,t,o,i)}]),((l.prototype=new e).constructor=l).prototype.generateParametersForIssuesOpen=function(e){var t=this.generateGeneralIssuesParameters(e);t+="&closed_on=null";e=new Date(e.timespan.toDateTime);return t+="&created_on=<="+this.dateToYMD(e)},angular.module("adf.widget.easyredmine").factory("easyRedmineService",["$http","easyRedmineEndpoint","easyRedmineRedirectEndpoint","$q",function(e,t,o,i){return new l(e,t,o,i)}]),e.prototype.request=function(e){return this.http.get(this.apiEndpoint+e).then(function(e){return e.data})},e.prototype.getProjects=function(){return this.request("projects.json").then(function(e){return e.projects})},e.prototype.getVersions=function(e){return this.request("projects/"+e+"/versions.json").then(function(e){return e.versions})},e.prototype.getIssues=function(e){var t=this.generateGeneralIssuesParameters(e),e=e.limit||Number.MAX_SAFE_INTEGER;return this.getIssuesWithParamsAndLimit(t,e)},e.prototype.getIssuesForChart=function(e){var t=[],o=e.limit||Number.MAX_SAFE_INTEGER,i=this.generateParametersForIssuesOpenOnEnd(e),n=this.generateParametersForIssuesClosedBetweenStartAndEnd(e),e=this.generateParametersForIssuesOpen(e);return this.q.all([this.getIssuesWithParamsAndLimit(i,o),this.getIssuesWithParamsAndLimit(n,o),this.getIssuesWithParamsAndLimit(e,o)]).then(function(e){return angular.forEach(e,function(e){angular.forEach(e,function(e){t.push(e)})}),t})},e.prototype.getIssuesWithParamsAndLimit=function(i,n){var s=[];return this.collectPageIssues(i,0).then(function(e){angular.forEach(e.issues,function(e){s.push(e)});for(var t=[],o=100;o<e.total_count&&o<n;o+=100)t.push(this.collectPageIssues(i,o));return 0<i.length?this.q.all(t).then(function(e){return angular.forEach(e,function(e){angular.forEach(e.issues,function(e){s.push(e)})}),s}).catch(function(e){return{error:e}}):s}.bind(this))},e.prototype.collectPageIssues=function(e,t){return this.request("issues.json"+e+"&offset="+t).then(function(e){return e}).catch(function(e){return{error:e}})},e.prototype.generateParametersForIssuesOpenOnEnd=function(e){var t=this.generateGeneralIssuesParameters(e);t+="&status_id=*";e=new Date(e.timespan.toDateTime);return t+="&created_on=<="+this.dateToYMD(e),t+="&closed_on=>="+this.dateToYMD(e)},e.prototype.generateParametersForIssuesOpen=function(e){var t=this.generateGeneralIssuesParameters(e);t+="&status_id=open";e=new Date(e.timespan.toDateTime);return t+="&created_on=<="+this.dateToYMD(e)},e.prototype.generateParametersForIssuesClosedBetweenStartAndEnd=function(e){var t=this.generateGeneralIssuesParameters(e);t+="&status_id=*";var o=new Date(e.timespan.fromDateTime),e=new Date(e.timespan.toDateTime);return t+="&closed_on=><"+this.dateToYMD(o)+"|"+this.dateToYMD(e)},e.prototype.generateGeneralIssuesParameters=function(e){var t="?limit=100&sort=created_on";return e.project&&"All"!==e.project&&(t+="&project_id="+angular.fromJson(e.project).id),e.filterWithAssigned&&e.assigned_to_id&&(t+="&assigned_to_id="+e.assigned_to_id),e.showClosed&&(t+="&status_id=*"),e.filterWithVersion&&e.version&&(t+="&fixed_version_id="+angular.fromJson(e.version).id),e.filterWithTracker&&e.tracker&&(t+="&tracker_id="+angular.fromJson(e.tracker).id),t},e.prototype.dateToYMD=function(e){var t=e.getDate(),o=e.getMonth()+1;return e.getFullYear()+"-"+(o<=9?"0"+o:o)+"-"+(t<=9?"0"+t:t)},e.prototype.getCustomQueries=function(){return this.request("queries.json?limit=100")},e.prototype.getIssuesByQueryId=function(e,t){return this.request("issues.json?query_id="+e+"&project_id="+t).then(function(e){return e.issues})},e.prototype.getRedmineEndpoint=function(){return this.apiEndpoint},e.prototype.getRedmineRedirectEndpoint=function(){return this.apiEndpointRedirect},e.prototype.getTrackers=function(){return this.request("trackers.json").then(function(e){return e.trackers})},e.prototype.getMyIssues=function(){return this.request("issues.json?assigned_to_id=me").then(function(e){return e}).catch(function(e){return{error:e}})},angular.module("adf.widget.redmine").controller("issueController",["issues","config","redmineService",function(e,t,o){return c(this,e,t,o)}]),angular.module("adf.widget.easyredmine").controller("easyIssueController",["issues","config","easyRedmineService",function(e,t,o){return c(this,e,t,o)}]),angular.module("adf.widget.redmine").factory("chartDataService",["$q","redmineService",function(e,t){return p(0,t)}]),angular.module("adf.widget.easyredmine").factory("easyChartDataService",["$q","easyRedmineService",function(e,t){return p(0,t)}]),angular.module("adf.widget.redmine").controller("chartController",["chartData","config",function(e,t){return u(this,e,t)}]),angular.module("adf.widget.easyredmine").controller("easyChartController",["chartData","config",function(e,t){return u(this,e,t)}])}(window);